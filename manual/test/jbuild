(jbuild_version 1)

(rule(

     (targets (montest.exe))
     (deps (${ROOT}/manual/dll/myclib.so
            ${ROOT}/manual/dll/myclib.h
            test.c))
     (action
      (progn
       (copy ${ROOT}/manual/dll/myclib.h myclib.h)
       (copy ${ROOT}/manual/dll/myclib.so myclib.so)
       (run ${CC} -o ${@} -Wl,-rpath,. myclib.so test.c)
     ))
))

(alias(
      (name runmanualtest)
      (deps (montest.exe))
      (action (run ${<}))
))
